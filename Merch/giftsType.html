<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>礼品类别</title>
    <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<div class="layui-row" style="padding: 10px;">
    <div class="layui-col-lg12 layui-col-md12 layui-col-sm12 layui-col-xs12">
        <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-col-xs12" style="height: 600px;padding: 15px;">
            <ul id="tree"></ul>
        </div>
        <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-col-xs12" style="height: 600px;padding: 15px;"></div>
    </div>

</div>
</body>
<script src="js/jquery-1.8.3-min.js"></script>
<script src="layui/layui.js"></script>
<script src="js/storeSystem.js"></script>
<script>
    let xc=xcActionSystem.prototype;
    let token=xc.getStorage('token');
    layui.use(['form','tree','layer'],function () {
        let form=layui.form;let tree=layui.tree;let layer=layui.layer;
        setGiftType(token,tree,layer)
    })
    function setGiftType(token,tree,layer) {
        let _obj={
            'merchId':JSON.parse(xc.getStorage('logMsg')).merchId,
            'pDictKey':'商品类别',
            'userToken':token,
            'signkey':'1f626576304bf5d95b72ece2222e42c3'};
        let url='/XCCloud/Dictionary?action=GetNodes';
        let parasJson = JSON.stringify(_obj);
        $.ajax({
            type: "post",
            url: url,
            contentType: "application/json; charset=utf-8",
            data: { parasJson: parasJson },
            success: function (data) {
                data=JSON.parse(data);
                console.log(data);
                if(data.result_code==1){
                    let treeData=data.result_data;
                    tree({
                        elem:'#tree',
                        nodes:treeData,
                        click:function (node) {
                            console.log(node)
                            if(node.id!=undefined&&node.ruleType!=undefined){
                                getRule(node.ruleType,node.id,table);
                                _ruleId=node.id;
                                _ruleType=node.ruleType;
                            }

                        }
                    })
                }else {
                    layer.msg(data.result_msg||data.return_msg)
                }
            }

        })

    }
</script>
</html>