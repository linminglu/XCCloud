<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>优惠套餐设定</title>
    <link rel="stylesheet" href="layui/css/layui.css">
</head>
<style>
    .iframeBox{height: 100%;}
    .iframeBox .layui-tab-item{position: absolute;top:65px;left: 0;right: 0;bottom: 0;}
    .iframeBox iframe{border: none;min-width: 400px;}
    .layui-form-onswitch{
        border-color: #5FB878!important;
        background-color: #5FB878!important;
    }
    .layui-form-switch{
        height: 22px;
        line-height: 22px;
        width: 42px;
        border: 1px solid #d2d2d2;
        border-radius: 20px;
        background-color: #fff;
    }
    .layui-form-switch em{
        width: 25px;
        color: #999!important;
        font-size: 12px;}
    .layui-form-switch i{
        left: 5px;
        top: 3px;
        width: 16px;
        height: 16px;
        border-radius: 20px;
        background-color: #d2d2d2;
    }
    .layui-form-onswitch i{
        left: 32px;
    }

    #goodIsAll .layui-form-switch {
        height: 36px;
        line-height: 36px;
        width: 180px;
        border-radius: 5px;
        border: 1px solid #orangered;
        background-color: #999;
    }

    #goodIsAll .layui-form-switch i {
        left: 0px;
        top: 0px;
        width: 95px;
        height: 36px;
        margin-top: -1px;
        border-radius: 5px 0 0 5px;
        border: 1px solid #aaa;
        background-color: #fff;
    }

    #goodIsAll  .layui-form-switch em {
        width: 80px;
        color: #ffffff!important;
        font-size: 14px;
    }

    #goodIsAll .layui-form-onswitch {
        border-color: #1e9fff!important;
        background-color: #1e9fff!important;
    }

    #goodIsAll  .layui-form-onswitch i {
        left: 95px;
        border-radius: 0 5px 5px 0;
        border: 1px solid #aaa;
        margin-top: -1px;
    }


</style>
<body>
   <div class="layui-row">
       <blockquote class="layui-elem-quote" style="text-align: right">
           <button type="button" class="layui-btn layui-btn-normal">查询模板</button>
           <button type="button" class="layui-btn layui-btn-normal addNewPackage">新增套餐</button>
       </blockquote>
       <div class="layui-col-md12 layui-col-lg12 layui-col-sm12">
           <table class="layui-hide" id="digitDestroyTb"  lay-filter="digitDestroyTb"></table>
       </div>
   </div>
</body>
<script src="js/jquery-1.8.3-min.js"></script>
<script src="layui/layui.js"></script>
<script src="js/storeSystem.js"></script>
<script>
    var xc=xcActionSystem.prototype;
    var token=xc.getStorage('token');
    layui.use(['element','form','layer','table'], function(){
        let element = layui.element,
            form=layui.form,
            layer=layui.layer,
            table=layui.table;
     $('.addNewPackage').on('click',()=>{
         xc.removeStorage('foodId');
         xc.setStorage('dpsAdd','dpsAdd');
       var index=  layer.open({
             title:'新增套餐',
             shade:0.6,
             type:2,
             area:['1100px','600px'],
             content:['packageMix.html','no'],
         })
     });
     let parm={'obj':{'userToken':token,'signkey':'1f626576304bf5d95b72ece2222e42c3'},
         'url':'/XCCloud/Promotion?action=GetFoodInfoList',
         'elem':'#digitDestroyTb',
         'cols':[
             {field:'FoodID', title:'套餐编号', align: 'center', sort: true}
             ,{field:'FoodName',title: '套餐名称', align: 'center'} //width 支持：数字、百分比和不填写。
             ,{field:'ClientPrice', title: '散客价', align: 'center'}
             ,{field:'MemberPrice', title: '会员价', align: 'center'}
             ,{field:'FoodTypeStr', title: '套餐类别', align: 'center'}
             // ,{field:'RechargeTypeStr', title: '充值方式', align: 'center'}
             ,{field:'AllowInternet', title: '是否允许第三方', align: 'center',templet:'#internet'}
             ,{field:'AllowPrint', title: '是否允许打印', align: 'center',templet:'#print'}
             ,{field:'ForeAuthorize', title: '是否允许前台授权', align: 'center',templet:'#authorize'}
             ,{field:'StartTime', title: '启用时间', align: 'center'}
             ,{field:'EndTime', title: '停用时间', align: 'center'}
             ,{fixed: 'right', title: '操作', width:100, align:'center', toolbar: '#barDemo'}]
     };
     xc.getInitData(parm);

     table.on('tool(digitDestroyTb)', function(obj){
            var data = obj.data;
            var layEvent = obj.event;
            var foodId=data.FoodID;
            var foodName=data.FoodName;
           xc.removeStorage('dpsAdd');
            if(layEvent === 'detail'){ //查看
                xc.setStorage('foodId',foodId);
                    if(data.FoodTypeStr=='混合'){
                    layer.open({
                        type:2,
                        title:'修改:'+foodName+'"套餐',
                        shade:0.6,
                        area:['1100px','600px'],
                        content:['packageMix.html','no']
                    })
                }
           }
     });
    });
</script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="detail"> <i class="layui-icon">&#xe642;</i>编辑</a>
</script>
<script type="text/html" id="internet">
    {{# if(d.AllowInternet==1){ }}
    <input type="checkbox" checked name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test" disabled>
    {{# }else{ }}
    <input type="checkbox" name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test" disabled>
    {{#  } }}
</script>
<script type="text/html" id="print">
    {{# if(d.State==1){ }}
    <input type="checkbox" checked name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test" disabled>
    {{# }else{ }}
    <input type="checkbox" name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test" disabled>
    {{#  } }}
</script>
<script type="text/html" id="authorize">
    {{# if(d.ForeAuthorize==1){ }}
    <input type="checkbox" checked name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test"disabled >
    {{# }else{ }}
    <input type="checkbox" name="switch" lay-skin="switch" lay-text="允许|禁止" class="tb_check" lay-filter="test" disabled>
    {{#  } }}
</script>
</html>